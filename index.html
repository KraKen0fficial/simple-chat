<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnonWave ‚Äî –ê–Ω–æ–Ω–∏–º–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div id="login-screen" class="screen active">
            <div class="login-box">
                <span class="logo">‚ú® AnonWave</span>
                <h1>–ê–Ω–æ–Ω–∏–º–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</h1>
                <p>–ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –í–æ–π–¥–∏ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–º –∏ —Å–æ–∑–¥–∞–π —Å–≤–æ—é –∞–Ω–æ–Ω–∏–º–Ω—É—é –∫–æ–º–Ω–∞—Ç—É.</p>

                <div class="auto-nickname" id="nickname-preview"></div>
                <div class="room-controls">
                    <input type="text" id="room-input" placeholder="–ö–æ–º–Ω–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: friends)" maxlength="40">
                    <button class="secondary-btn" onclick="generateRoom()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
                </div>
                <button id="reroll-btn" class="secondary-btn" onclick="rerollIdentity()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–∏—á–Ω–æ—Å—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                <button id="join-btn" onclick="joinChat()">–í–æ–π—Ç–∏ –≤ –∫–æ–º–Ω–∞—Ç—É</button>

                <small id="status-text">–ù–∏–∫–∞–∫–∏—Ö –ø–∞—Ä–æ–ª–µ–π –∏ email. –ü—Ä–æ—Å—Ç–æ —á–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.</small>
            </div>
        </div>

        <div id="chat-screen" class="screen">
            <div class="chat-header">
                <div class="header-content">
                    <div>
                        <h2>üí¨ AnonWave</h2>
                        <div class="room-label">–ö–æ–º–Ω–∞—Ç–∞: <span id="current-room"></span></div>
                    </div>
                    <div class="user-info">
                        <span id="current-user"></span>
                        <button onclick="copyShareLink()" class="copy-btn">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                        <button onclick="leaveChat()" class="leave-btn">–í—ã–π—Ç–∏</button>
                    </div>
                </div>
            </div>

            <div id="messages-container" class="messages-container"></div>

            <div class="input-container">
                <input type="text" id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="500">
                <button id="send-btn" onclick="sendMessage()" aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getDatabase, ref, push, onChildAdded, serverTimestamp, query, orderByChild, limitToLast } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDemoKey123456789",
            authDomain: "simple-chat-demo.firebaseapp.com",
            databaseURL: "https://simple-chat-demo-default-rtdb.firebaseio.com",
            projectId: "simple-chat-demo",
            storageBucket: "simple-chat-demo.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:abc123def456"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        window.db = database;
        window.dbRef = ref;
        window.dbPush = push;
        window.dbOnChildAdded = onChildAdded;
        window.dbServerTimestamp = serverTimestamp;
        window.dbQuery = query;
        window.dbOrderByChild = orderByChild;
        window.dbLimitToLast = limitToLast;
    </script>
    <script src="script.js"></script>
</body>
</html>
